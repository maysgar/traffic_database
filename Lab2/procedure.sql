--Daily sanctions
--TODO: JOBS
CREATE OR REPLACE PROCEDURE daily_sanctions IS
  total_amount INTEGER := 0;
  amount_speed INTEGER := 0;
  amount_section INTEGER := 0;
  amount_safety INTEGER := 0;
  a OBSERVATIONS%ROWTYPE;

  CURSOR obs IS
  SELECT nPlate, odatetime, road, km_point, direction, speed, DNI FROM
  OBSERVATIONS NATURAL JOIN VEHICLES
  JOIN PERSONS ON owner = DNI
  WHERE SYSDATE = CAST(odatetime AS DATE);
BEGIN
    
END daily_sanctions;
/

/*
PRUEBAS:

INSERT INTO OBSERVATIONS VALUES('3422AEU',TO_TIMESTAMP('10-APR-18 09.00.00.000000','DD-MON-YY HH24.MI.SS.FF'),'A1',76,'ASC',500);
INSERT INTO OBSERVATIONS VALUES('3422AEU',TO_TIMESTAMP('11-APR-18 09.00.00.000000','DD-MON-YY HH24.MI.SS.FF'),'A1',76,'ASC',500);
INSERT INTO OBSERVATIONS VALUES('3422AEU',TO_TIMESTAMP('12-APR-18 09.00.00.000000','DD-MON-YY HH24.MI.SS.FF'),'A1',76,'ASC',500);
INSERT INTO OBSERVATIONS VALUES('3422AEU',TO_TIMESTAMP('13-APR-18 09.00.00.000000','DD-MON-YY HH24.MI.SS.FF'),'A1',76,'ASC',500);
INSERT INTO OBSERVATIONS VALUES('3422AEU',TO_TIMESTAMP('14-APR-18 09.00.00.000000','DD-MON-YY HH24.MI.SS.FF'),'A1',76,'ASC',500);
INSERT INTO OBSERVATIONS VALUES('3422AEU',TO_TIMESTAMP('15-APR-18 09.00.00.000000','DD-MON-YY HH24.MI.SS.FF'),'A1',76,'ASC',500);
INSERT INTO OBSERVATIONS VALUES('3422AEU',TO_TIMESTAMP('16-APR-18 09.00.00.000000','DD-MON-YY HH24.MI.SS.FF'),'A1',76,'ASC',500);
INSERT INTO OBSERVATIONS VALUES('3422AEU',TO_TIMESTAMP('17-APR-18 09.00.00.000000','DD-MON-YY HH24.MI.SS.FF'),'A1',76,'ASC',500);
INSERT INTO OBSERVATIONS VALUES('3422AEU',TO_TIMESTAMP('18-APR-18 09.00.00.000000','DD-MON-YY HH24.MI.SS.FF'),'A1',76,'ASC',500);

DELETE FROM OBSERVATIONS WHERE nPlate = '3422AEU' AND odatetime = TO_TIMESTAMP('10-APR-18 09.00.00.000000','DD-MON-YY HH24.MI.SS.FF');
DELETE FROM OBSERVATIONS WHERE nPlate = '3422AEU' AND odatetime = TO_TIMESTAMP('11-APR-18 09.00.00.000000','DD-MON-YY HH24.MI.SS.FF');
DELETE FROM OBSERVATIONS WHERE nPlate = '3422AEU' AND odatetime = TO_TIMESTAMP('12-APR-18 09.00.00.000000','DD-MON-YY HH24.MI.SS.FF');
DELETE FROM OBSERVATIONS WHERE nPlate = '3422AEU' AND odatetime = TO_TIMESTAMP('13-APR-18 09.00.00.000000','DD-MON-YY HH24.MI.SS.FF');
DELETE FROM OBSERVATIONS WHERE nPlate = '3422AEU' AND odatetime = TO_TIMESTAMP('14-APR-18 09.00.00.000000','DD-MON-YY HH24.MI.SS.FF');
DELETE FROM OBSERVATIONS WHERE nPlate = '3422AEU' AND odatetime = TO_TIMESTAMP('15-APR-18 09.00.00.000000','DD-MON-YY HH24.MI.SS.FF');
DELETE FROM OBSERVATIONS WHERE nPlate = '3422AEU' AND odatetime = TO_TIMESTAMP('16-APR-18 09.00.00.000000','DD-MON-YY HH24.MI.SS.FF');
DELETE FROM OBSERVATIONS WHERE nPlate = '3422AEU' AND odatetime = TO_TIMESTAMP('17-APR-18 09.00.00.000000','DD-MON-YY HH24.MI.SS.FF');
DELETE FROM OBSERVATIONS WHERE nPlate = '3422AEU' AND odatetime = TO_TIMESTAMP('18-APR-18 09.00.00.000000','DD-MON-YY HH24.MI.SS.FF');

set serveroutput on;
exec daily_sanctions;
*/
